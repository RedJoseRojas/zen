{"name":"Zen","body":"# Zen\r\n\r\n_Z-engine (Zen)_ is the most simple, safe, minimal, fast, full featured, general purpose javascript module stack engine.\r\n\r\nIt's like Ruby's Rack or Python WSGI, but for Node.js.\r\n\r\n## Install\r\n\r\nAs simple as\r\n\r\n    npm install zen\r\n\r\nIf you don't use npm, then copy the single file `zen.js` somewhere you can get to it.   \r\n\r\n## How to use\r\n\r\n\tvar zapp=require('../zen')(\r\n\t  require('firstHandler')(),\r\n      require('secondHandler')(handleArg1, handleArg2),\r\n\t);\r\n\t\r\n\tvar result = zapp(<proper>, <application>, <args>); \r\n\r\n## Explanation\r\n\r\n_Zen_ takes a list of handler functions and will chain them up by the next() method in a z-engine instance. \r\n\r\nEach handler needs to be of the form:\r\n\r\n    function handler(<proper>, <application>, <args>, next) {\r\n      // Either handle the request here using the arguments\r\n      // or call `next()` to pass control to next module\r\n\r\n\t  // next uses node.js callback convention: \r\n      // any exceptions need to be caught and forwarded to `next(err)`\r\n\t  // result needs to be forwarded with `next(null,res)`\t\r\n\r\n\t  // without a call to `next` _Zen_ \"drops\" the chain  \r\n    }\r\n\r\nWhen using external modules we suggest to use the Setup Pattern, where the module is a callable function that returns the handler function.  \r\n\r\n    module.exports = function setup(<some>, <useful>, <setup>, args) {\r\n      // Do module setup stuff here\r\n      return function handler(<proper>, <application>, <args>, next) {\r\n        // Handle a request here\r\n      };\r\n    };\r\n\r\n## What Zen Does\r\n\r\n_Zen_ does a few things under the hood.\r\n\r\n - Creates standalone module engines. Multiple engines could be chained together.\r\n - Uses <a href='http://en.wikipedia.org/wiki/Continuation-passing_style'>continuation passing style</a>, but as long as an application stack uses `return next();` value returned from handle functions could be assigned to the caller.\r\n - Wraps handlers in a `try..catch` to catch any exception that happens running the engine.\r\n - Forwards errors and exceptions passed to any next module directly to the error handler.  This means module doesn't have to worry about errors from previous modules.\r\n - Forwards result passed to any next module directly to the result handler. This avoids generic result handling in module's business logic  \r\n\r\nerrorHandler and resultHandler could be overridden by custom functions. As handler above these needs to be of the form:\r\n\r\n\tzapp.errorHandler = function(<proper>, <application>, <args>, err) {\r\n\t}\r\n\tzapp.resultHandler= function(<proper>, <application>, <args>, res) {\r\n\t}\r\n\r\n## What Zen Does NOT Do\r\n\r\nDue its general purpose, _Zen_ does not provide any middleware modules of any kind.\r\n\r\n## API\r\n\r\n - `zapp.errorHandler` : this is the default request handler and the called handler on errors. Must be a function.\r\nWhen a `Handler` throws exception, this is catched by the original errorHandler (that prints on console).\r\n - `zapp.resultHandler` : this is the result handler. When it throws exception this is catched by the `errorHandler`.   \r\n - `zapp.pause` : pauses the engine and buffers the requests.\r\n - `zapp.stop` : stops the engine, requests will be forwarded to the errorHandler.\r\n - `zapp.resume` : resumes the engine and flushes the requests buffer on the engine.\r\n\r\n# Triadic subscriptions\r\n\r\nThe Book <a href=\"http://www.amazon.com/Clean-Code-Handbook-Software-Craftsmanship/dp/0132350882\">Clean Code</a> states: \r\n\t\r\n\tThe ideal number of arguments for a function is zero (niladic). \r\n\tNext comes one (monadic), followed closely by two (dyadic). \r\n\tThree arguments (triadic) should be avoided where possible. \r\n\tMore than three (polyadic) requires very special justification -- and then shouldn't be used anyway.\r\n\r\nIf you need multiple arguments there is a big chance that the method is doing more than it should or that you could abstract\r\nthe operation better. Mind the Javascript objects!!! \r\n\r\nKeep classes and functions as small as possible, break it into multiple \"modules\"... it is usually easier to \r\nunderstand what is going on.\r\n\r\n_zen-http_ is a special flavour of _Zen_ for triadic handlers. It includes proper HTTP result and error handlers and default 404 response. Connect and Stack compatible, a lot faster in real world use cases.\r\nUse `next(err)` to push a 500 error message to the client, `next(null,result)` to send the result with status 200.\r\n\r\n# Benchmarks\r\n\r\nInternal benchmarks show how _Zen_ versions are faster than Stack and Stack2\r\n\r\n<img src=\"https://github.com/pblabs/zen/raw/master/results.png\">\r\n\r\n# Conclusion\r\n\r\n_Zen_ is available on github <a href='https://github.com/plabs/zen'>here</a>\r\nunder <a href='https://github.com/plabs/zen/blob/master/MIT-LICENSE.txt'>MIT license</a>.\r\n\r\nIf you found bugs, please fill issues on github.\r\n\r\nFeel free to fork, modify and have fun with it :)\r\n\r\n## Credits\r\n\r\n_Zen_ takes ideas from Connect, Stack and internal projects under construction. \r\n","tagline":"Zen is a simple, basic, fast, general purpose, module stack engine for node.js.","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}